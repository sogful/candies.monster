<!DOCTYPE html>
<html lang="en">
<head>

    <title>Cut the Rope ‚Äì Level Browser</title>
    <link rel="icon" type="image/png" href="icon.png">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- search engines (practically no one is gonna find this through google but still) -->
    <meta name="robots" content="index, follow, max-snippet:120, max-image-preview:large, max-video-preview:5">
    <meta name="googlebot" content="index, follow, max-snippet:120, max-image-preview:large, max-video-preview:5">
    <meta name="bingbot" content="index, follow">
    <meta name="description" content="Browse and download custom Cut the Rope levels online!">
    <meta name="keywords" content="cut the rope, cut the rope modding, cut the rope home, level browser, game, walkthrough, tips, ios, android game">

    <style>

        @font-face {
            font-family: "Good Dog";
            src: /*universal*/ url("/assets/fonts/gooddog.woff");
        }

        body {
            font-family: "Good Dog";
            display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; min-width: 100vw; overflow-y: auto;
            user-select: none; padding: 0; margin: 0;

            background-color: #e9a856;
            --bg: url("assets/images/bg.webp"); /* (DON'T turn on word wrap) */
            background-image: var(--bg), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' display='block' viewBox='0 0 2048 1154'%3E%3Cpath fill='%2392a902' d='M0 0h2048v1152l-508 1v1h-64v-1L0 1152Z'/%3E%3Cpath fill='%23d6924b' d='M0 0h2048v500l-3-1-27-1-5-3v-2l-14-1h-76l-7 2-3 2h-14v-2h-25l-13-4-4-2-17-1-8-2-7-3-7-2v-2h-25l-16-3-8-3-4-2h-10l-11 4h-15l-20-3-11-3-17-3v-2h-15l-33-2h-35l-9-4-16 1h-11l-8-5-16-3-2-1h-11l-6 1-26 1-12 2-5 5-5-1-1-1-23-1-3 1-30 1-8 3-34 1-32 2-18 4-8 3-16 2-19 3h-13l-16-4-9 1-7 3-12 1-6 2-25 1-6 3-7 2-7 3-5 1-16 1-17 6-25 1h-14l-3-3-3-1h-80l-13 2-7 4-24 1-10 5-30 1-21 3-6 2-20 3-27 6-14 4-11 2h-8l-12-3h-8l-4 2h-51l-1 1-20 2-40 1-10 5h-7l-10-1-5 4-37 1h-39l-12 2-13 5-7 1-12-5-7-2-11-2h-11l-19 1h-21l-23-2-3-3h-17l-7-2v-2l-45-1-1-1-18-2-53-1-2-1h-7l-8 3h-12l-16-4-19-3-19-5-20-4-5-2-19-3-35-1-6-3-19-1-10-2-4-3-8-2H0Z'/%3E%3Cpath fill='%235b65a6' d='M540 783h24l4 1 16 1 8 10 8 4 5 2 9 2 13 5 7 4 9 1 1 3 7 1 15 3 14 2 12 3 26 3 15 4 11 2 12 3 5 1v2l6 1 5 2 16 3 18 4 21 3 1 1 11 2 6 2 21 5 16 4 26 6 9 3 10 1 9 3 4 1 14 1 2 1 14 1 13 3 9 3 6 3 16 4 20 3 9 3 12 2 28 4 14 3 19 2 12 3 5 2 7 1 8 3 19 5 1 1 14 2 29 4 12 4 39 7 17 2 9 3 10 4 13 3 39 3 18 1 12 3 14 3 14 4 11 2 7 3 19 6 2 1 9 1 3 2 5 1 34 2 6 2 11-1 25-5 16-1 19-7 12-3 5-2 9-2 16-4 11-2 12-1 1-1 14-1 3-1 36-2 11-3h5v-2l12-3 7-3 24-3 5-2 24-4 12-3 16-2h10v-2l10-2 15-2 18-5 4-3 18-4 24-4 3-1 18-2 7-2 21-3 6-2 29-6 19-3 14-5 2-2 8-2 8-2h4v270l-508 1v1h-64v-1L0 1152V911l16-3 9-1 16-4 26-6 16-3 9-1 6-4 18-5 16-1 2-1 14-1 13-4 10-2 18-4 15-4 17-3 7-2 18-5 9-2 4-2 27-4 31-7 14-4 1-1h5v-2l16-3 16-2 1-2 9-2 15-1 12-3 15-2 23-5 14-5 5-3 10-4 8-2 28-10 21-6Z'/%3E%3Cpath fill='%23f1f2ea' d='M540 783h24l4 1 16 1 8 10 8 4 5 2 9 2 13 5 7 4 9 1 1 3 7 1 15 3 14 2 12 3 26 3 15 4 11 2 12 3 5 1v2l6 1 5 2 16 3 18 4 21 3 1 1 11 2 6 2 21 5 16 4 26 6 9 3 10 1 9 3 4 1 14 1 2 1 14 1 13 3 9 3 6 3 16 4 20 3 9 3 12 2 28 4 14 3 19 2 12 3 5 2 7 1 8 3 19 5 1 1 14 2 29 4 12 4 39 7 17 2 9 3 10 4 13 3 39 3 18 1 12 3 14 3 14 4 11 2 7 3 19 6 2 1 9 1 3 2 5 1 34 2 6 2 11-1 25-5 16-1 19-7 12-3 5-2 9-2 16-4 11-2 12-1 1-1 14-1 3-1 36-2 11-3h5v-2l12-3 7-3 24-3 5-2 24-4 12-3 16-2h10v-2l10-2 15-2 18-5 4-3 18-4 24-4 3-1 18-2 7-2 21-3 6-2 29-6 19-3 14-5 2-2 8-2 8-2h4v10l-1 1-12 1-18 6-14 5-14 2-19 1-25 4h-15l-8 3-17 2-15 6-19 5-17 4-11 3-3 1-19 1-7 1-1 3-5 3h-11l-12 6-7 2-20 1-18 2-13 2-17 3-25 5-23 3-2 2-10 4-10 5-4 3-12 1h-5l-8 4-24 1-15 2-10 2v2l-15 4-9 3h-5l-5-3h-11l-1 1h-16l-3 3-7-1-6-1-15 1-8-2v-2l-11-1-13-5-8-3-19-3-10-4-9-1-6 2-1 1h-12l-4-3-12-5-10-6-18-5-20-2-12-3-45-6-24-2-8-3-8-3-9-1-5-3v-2l-6-1-19-1-20-4-23-7-13-3-9-5-23-3-7-3-36-3-28-1-25-8-6-3-21-3-25-8-16-1-12-4-13-5-16-4-30-1-11-4-14-4-9-2-3-2-21-3-28-3-22-7-30-4-12-2-5-3-7-1-3-3h-14l-7-4-8-5-8-2-15-8-19-6-27-8v-2h-8l-12-3-10-3-16-1-8 2-20 6-25 5-17 5-9 4-10 4-10 5-13 3-5 5-10 2-11 4-10 2-16 4-25 3-29 8-14 2-20 1-16 3-9 3-16 5-9 3-5 1-20 1-15 4-18 5-12 3-3 1-17 1-17 6-3 1-16 2-8 3-17 4-9 3-13 2-16 1-5 2-33 2-8 5H0v-6l16-3 9-1 16-4 26-6 16-3 9-1 6-4 18-5 16-1 2-1 14-1 13-4 10-2 18-4 15-4 17-3 7-2 18-5 9-2 4-2 27-4 31-7 14-4 1-1h5v-2l16-3 16-2 1-2 9-2 15-1 12-3 15-2 23-5 14-5 5-3 10-4 8-2 28-10 21-6Z'/%3E%3Cpath fill='%23f7f4e9' d='M1481 445h66l31 5 20 3 27 2 12 2 52 2 2 1 21 1 16 2 48 3 27 3 23 3 12 2 22 4 26 5 2 1h22l4-1h24l21 4 10 1 38 1 11 2 1 1 29 3v5l-3-1-27-1-5-3v-2l-14-1h-76l-7 2-3 2h-14v-2h-25l-13-4-4-2-17-1-8-2-7-3-7-2v-2h-25l-16-3-8-3-4-2h-10l-11 4h-15l-20-3-11-3-17-3v-2h-15l-33-2h-35l-9-4-16 1h-11l-8-5-16-3-2-1h-11l-6 1-26 1-12 2-5 5-5-1-1-1-23-1-3 1-30 1-8 3-34 1-32 2-18 4-8 3-16 2-19 3h-13l-16-4-9 1-7 3-12 1-6 2-25 1-6 3-7 2-7 3-5 1-16 1-17 6-25 1h-14l-3-3-3-1h-80l-13 2-7 4-24 1-10 5-30 1-21 3-6 2-20 3-27 6-14 4-11 2h-8l-12-3h-8l-4 2h-51l-1 1-20 2-40 1-10 5h-7l-10-1-5 4-37 1h-39l-12 2-13 5-7 1-12-5-7-2-11-2h-11l-19 1h-21l-23-2-3-3h-17l-7-2v-2l-45-1-1-1-18-2-53-1-2-1h-7l-8 3h-12l-16-4-19-3-19-5-20-4-5-2-19-3-35-1-6-3-19-1-10-2-4-3-8-2H0v-9l20 1 7 3 60 1 11 3 26 3 3 1 13 1 3 1 15 1 30 4 36 5 21 3 31 3 60 6 45 2 11 1 2 1 22 1 3 1 32 1 14 2 32 1 31 3 12 2 10-1 15-4 17-4 3-2h7l9 3 5 1h18l9-1 36-1 3-1 22-1 24-4 23-2 21-1 26-4 21-2 23-1 14-2 22-1 4-1 17-1 13-3 20-2 7-1 18-1 2-1 25-2 4-2 22-2v-2l60-1 8-3h50l24-7 14-4 19-3 7-2 33-4 1-1 65-4 13-2h41l21-2 40-2 2-1 38-2 29-4Z'/%3E%3C/svg%3E");
            background-position: center center;
            background-repeat: no-repeat; background-size: cover;

            cursor: /*universal*/ url("/assets/static/idle.cur"), auto;
        }
        body:active, body:focus, body:focus-within, body:target, body:active * {
            cursor: /*universal*/ url("/assets/static/active.cur"), auto; 
        }
        :any-link {
            color: #8feeff; text-decoration: none !important;
            cursor: url("/assets/static/link.cur"), default !important;
        }
        * {
            cursor: inherit !important;  
            scrollbar-width: none; scrollbar-color: #ffffff #ffffff;
        }
        *::-webkit-scrollbar {width: 0px}

        /*//////////////////////////////////////////////////////////////////////*/

        .shadow {
            position: fixed; display: flex;
            justify-content: center; align-items: center;
            animation: rotate 60s linear infinite; z-index: -10;
            box-shadow: 0 0 0 9999px rgba(0,0,0,0.275); /* put this site on a damn fremont street experience i dare you */
            pointer-events: none; height: 230vh;
        }
        @keyframes rotate {
            0% {transform: rotate(0deg)}
            100% {transform: rotate(360deg)}
        }

        .nom {
            position: fixed; display: flex;
            left: 3%; bottom: 2px; height: 8em;
        }

        .loading {
            position: fixed; display: flex;
            justify-content: center; align-items: center;
            width: 100vw; height: 100vh; z-index: 65535;
            background-color: rgba(0,0,0,0.5);
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.33));
            transition: opacity 0.5s;
        }
        .loading svg {
            width: 100px;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,/*0.55*/0.33));
            animation: rotate 2s linear infinite;
        }
        
        .autoplay {
            position: fixed; display: flex;
            justify-content: center; align-items: center;
            width: 100vw; height: 100vh; z-index: 65534;
            background-color: rgba(0,0,0,0.5);
            color: rgba(255, 255, 255, 0.75); font-size: 2em;
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 4px 0 black;
            paint-order: stroke fill; transition: opacity 0.5s;
            pointer-events: none; display: none;
        }

        /*//////////////////////////////////////////////////////////////////////*/

        .adoverlay {
            position: fixed; display: flex;
            justify-content: center; align-items: center;
            width: 100vw; height: 100vh; z-index: 65533;
            background-color: rgba(0,0,0,0.5);
            pointer-events: none;
        }
        /* i'm aware that the frame is transparent so the site is visible through it during fading, but meh it's whatever */
        .frame {
            position: fixed; display: flex;
            justify-content: center; align-items: center;
            width: 500px;
            aspect-ratio: 1700 / 1330;
            top: 0; right: 2.5vw;
            box-sizing: border-box; overflow: hidden;
            pointer-events: auto; touch-action: none;
            container-type: size;
        }
        @media (max-width: 700px) {
            .frame {
                width: 90vw; left: 50%;
                right: auto; transform: translateX(-50%);
            }
        }

        .awful {
            display: flex; position: absolute;
            top: 0; left: 0; z-index: 99;
            width: 100%; height: 100%;
            object-fit: cover; pointer-events: none;
        }
        .carousel {
            display: flex; position: absolute;
            justify-content: center; align-items: center;
            width: 90%; height: 90%;
            top: 35%; left: 50%;
            transform: translate(-50%, -50%);
            overflow: hidden;
        }
        .carouselscroll {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            height: 100%;
        }
        .carousel a {
            display: flex; position: absolute;
            width: 100%; height: 100%;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            opacity: 0; transition: opacity 0.3s ease-in-out;
            text-decoration: none; pointer-events: none;
        }
        .carousel a.active {
            opacity: 1;
            pointer-events: auto;
        }
        .carousel img {
            display: block;
            max-width: 100%; max-height: 100%;
            width: 100%; height: 100%;
            object-fit: contain;
        }

        /* extremely specific container sizes in this section rather than % / viewport because it outright doesn't work with anything else.. 
           i might be missing some crucial detail */

        .adheader {
            display: flex; position: absolute;
            justify-content: center; align-items: center;
            top: 1cqh; left: 6.5cqw; right: 6.5cqw; z-index: 999;
            justify-content: space-between; align-items: flex-start;
            color: white; font-size: clamp(5.8cqh, 5.2cqh, 7.8cqw);
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 4px 0 black;
            paint-order: stroke fill;
        }
        .adclose {
            display: flex; position: absolute;
            right: 0; height: 7cqh; width: auto;
        }

        .adfooter {
            display: flex; position: absolute;
            justify-content: center; align-items: center;
            bottom: 48cqh; left: 9cqw; right: 9cqw; z-index: 999;
            justify-content: space-between; align-items: flex-start;
        }
        .adleft {
            display: flex; position: absolute;
            left: 0; height: 7.75cqh; width: auto;
        }
        .adright {
            display: flex; position: absolute;
            right: 0; height: 7.75cqh; width: auto;
        }

        /*//////////////////////////////////////////////////////////////////////*/

        .page {
            position: fixed; display: flex;
            justify-content: center; align-items: center;
            width: 95vw; height: 95vh;
        }
        .logo {
            position: fixed; display: flex;
            top: 1em; left: 1em; z-index: 127;
            width: 150px; height: 150px;
            justify-content: center; align-items: center;
        }
        .logo img {
            width: 100%; height: 100%;
            object-fit: contain;
        }

        .controls {
            position: absolute; display: flex;
            justify-content: center;
            width: 100%; height: 100%;
        }
        .up {
            position: absolute; display: flex; top: 0;
            justify-content: center; align-items: center;
            flex-direction: column;
        }
        .down {
            position: absolute; display: flex; bottom: 0;
            justify-content: center; align-items: center;
            flex-direction: column;
        }
        .divider {width: 450px}
        .arrow {width: 70px}

        .main {
            position: relative;
            display: flex; justify-content: center; align-items: center;
            width: 80%; height: 80%;
        }

        /*//////////////////////////////////////////////////////////////////////*/


        .levels {
            position: relative;
            display: flex; flex-wrap: wrap; justify-content: center;
            align-content: flex-start;
            width: 100%; max-width: 1000px; height: 70%;
            overflow-y: auto; overflow-x: hidden;
            gap: 20px; padding: 10px;
            scrollbar-width: none;
            -ms-overflow-style: none;
            
            mask: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);
            -webkit-mask: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);
        }
        .levels::-webkit-scrollbar {display: none}

        .level {
            position: relative; display: flex;
            flex-direction: column; box-sizing: border-box;
            width: 400px; height: 200px;
            padding-top: 20px; padding-left: 30px;
            flex-shrink: 0;

            background-image: url("assets/images/coolbox.webp");
            background-size: cover; background-position: center;
            background-repeat: no-repeat;

            border-radius: 16px; 
            isolation: isolate; user-select: text;
        }
        .levelbg {
            position: absolute; object-fit: cover; display: flex;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 380px; height: 190px; border-radius: 20px;
            mix-blend-mode: overlay; filter: blur(2px); /* brightness(0.5); */
            z-index: -1; pointer-events: none;
        }

        /*//////////////////////////////////////////////////////////////////////*/

        .header {
            position: relative; display: flex;
            flex-direction: row; gap: 10px;
            padding-top: 20px; height: 10px;
            justify-content: flex-start; align-items: center;
        }
        .title {
            color: white; font-size: 1.75em;
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 0.15em 0 black;
            paint-order: stroke fill; max-width: 220px;
            white-space: nowrap;
        }
        .creator {
            color: white;
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 0.18em 0 black;
            paint-order: stroke fill; max-width: 100px;
            white-space: nowrap;
        }

        .desc {
            position: relative; display: flex;
            justify-content: flex-start; align-items: flex-start;
            flex-direction: row; max-width: 280px;
            margin-top: 1em; margin-left: -10px;
            color: white; font-style: italic;
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 3px 0 black;
            paint-order: stroke fill;
        }
        .desc > p {display: none}
        .desc p, .desc a {
            white-space: pre-line; display: -webkit-box;
            padding-left: 10px; padding-right: 10px; /* can't find a better solution to clipping text */
            -webkit-line-clamp: 3; line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden; text-overflow: ellipsis;
        }
        .desc a::before, .desc a::after {content: '"'}

        /*//////////////////////////////////////////////////////////////////////*/

        .footer {
            position: absolute;
            bottom: 0; width: 100%;
            display: flex; flex-direction: row;
            align-items: center; gap: 0.5em;
        }
        .rating, .features {
            display: flex; flex-direction: row;
            align-items: center; color: white;
            font-style: italic; font-size: 1.5em;
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 3px 0 black;
            paint-order: stroke fill;
        }
        .rating img {
            height: 1.5em;
            width: auto; object-fit: contain;
            display: flex; position: relative; z-index: 1;
        }

        .features {
            position: relative; display: flex;
            justify-content: center; align-items: center;
            background-color: rgba(0,0,0,0.25);
            border-radius: 1em; padding-left: -3em;
        }
        .features img {
            height: 1.5em; width: auto;
            object-fit: contain; display: flex;
            margin: 0 2px;
        }

        .morefeatures {
            position: absolute; display: none;
            justify-content: center; align-items: center;
            color: white; font-size: 0.65em;
            z-index: 10; width: 5em;
            top: 100%; left: 50%; transform: translate(-50%, -50%);
            -webkit-text-stroke: 0.175em black;
            text-shadow: 0 3px 0 black;
            paint-order: stroke fill;
            padding: 5px 10px;
        }
        
        .features.expanded {
            position: absolute; flex-wrap: wrap;
            justify-content: flex-start;
            border-radius: 1em; padding: 10px; 
            max-height: none; min-width: 300px;
            z-index: 1000; overflow: visible;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        .features.expanded img {margin: 5px}
        .features.expanded .morefeatures {display: none !important}
        
        /*//////////////////////////////////////////////////////////////////////*/

        .tooltip {
            position: absolute;
            background-color: rgba(0,0,0,0.25);
            backdrop-filter: blur(8px);
            padding: 0.5em; border-radius: 1em;
            color: white; text-align: center;
            max-width: 250px; z-index: 10000;
            pointer-events: none; opacity: 0;
            transition: opacity 0.2s ease-in-out;
            -webkit-text-stroke: 0.2em black;
            text-shadow: 0 3px 0 black;
            paint-order: stroke fill;
        }
        .tooltip pre {
            display: inline;
            white-space: pre;
            margin: 0;
        }
        .tooltiptitle {
            font-size: 1.35em;
        }
        .tooltipdesc {
            font-size: 1em;
        }
        .tooltipfooter {
            display: flex;
            justify-content: center; align-items: center;
            font-size: 0.75em;
            opacity: 0.5
        }
        .warning {
            padding-right: 2px; height: 15px !important;
        }

        /*//////////////////////////////////////////////////////////////////////*/

        .sound {
            position: fixed; display: flex;
            bottom: 1em; right: 1em;
            justify-content: center; align-items: center;
            flex-direction: row; gap: 5px; z-index: 127;
        }

        .sbutton {
            position: relative; display: flex;
            align-items: center; justify-content: center;

            width: 120px; height: 50px;

            background-image: url("assets/images/buttons/sbutton.webp");
            background-size: cover; background-position: center;
            background-repeat: no-repeat;
        }
        .sbutton img {
            position: fixed; display: flex;
            height: 75px; width: auto;
			object-fit: contain;
        }

    </style>

</head>
<body>

    <audio class="click" src="assets/audio/tap.mp3" preload="auto"></audio>
    <audio class="menu" src="assets/audio/menu.mp3" preload="auto"></audio>

    <img class="shadow" src="assets/images/shadowfixed.png">

    <!-- this is NOT a good solution lol -->
    <img class="nom" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">

    <div class="sound">
        <div class="sfx sbutton clickable">
            <img src="assets/images/settings/sfxon.png">
        </div>
        <div class="music sbutton clickable">
            <img src="assets/images/settings/musicoff.png">
        </div>
    </div>

    <div class="loading">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <path fill="#fbfbfb" d="M89 15h22l17 4 14 6 10 7 10 9 9 11 6 11 4 9 3 14 1 9v9l-3 19-5 14-8 13-11 12-9 8-17 9-21 5H89l-18-4-16-8-6-4-10-9-9-10-6-10-6-16-2-9-1-17 2-16 4-14 5-10 6-9 9-10 9-8 16-9 18-5Zm1 18-12 3-16 8-7 6v1l17 1 13 4 9 6 6 8 3 7v5l-4 1-9-6-4-1H74l-6 2-8 4-9 6-8 11-5 16-1 8 6 12 7 9h2l9-19 10-14 9-10 7-5 3-1h7l-1 5-7 6-4 8-2 6v13l4 14 7 9 6 5 8 4h8l14-5 10-7 4-4-21-9-8-6-7-7-5-10-2-8v-8l5-1 5 9 7 6 11 2 13-3 11-6 9-8 4-6v-8l-6-17-7-10-5-5-5 12-6 10-8 10-10 8-5 1-1-5 6-13 1-4V59l-4-10-6-9-8-7Z"/>
            <path fill="#080808" d="M90 29h13l8 7 7 8 5 10 1 6v14l-4 11-3 5 8-6 8-9 7-12 5-16 4 1 9 10 8 15 4 13v9l-8 11-11 8-12 5-4 1h-15l-6-3-7-6-2-4 2 10 7 11 7 6 9 5 16 6 6 1-2 4-12 10-15 7-7 2h-9l-10-5-8-7-7-12-3-11v-15l4-10 4-6 3-4-10 8-9 10-9 15-8 20-4-2-9-10-8-16v-8l5-16 6-11 8-7 10-6 12-4h12l10 4 3 1-5-9-8-7-10-4-5-1H45l4-6 12-10 16-8 6-2Zm0 4-12 3-16 8-7 6v1l17 1 13 4 9 6 6 8 3 7v5l-4 1-9-6-4-1H74l-6 2-8 4-9 6-8 11-5 16-1 8 6 12 7 9h2l9-19 10-14 9-10 7-5 3-1h7l-1 5-7 6-4 8-2 6v13l4 14 7 9 6 5 8 4h8l14-5 10-7 4-4-21-9-8-6-7-7-5-10-2-8v-8l5-1 5 9 7 6 11 2 13-3 11-6 9-8 4-6v-8l-6-17-7-10-5-5-5 12-6 10-8 10-10 8-5 1-1-5 6-13 1-4V59l-4-10-6-9-8-7Z"/>
            <path fill="#060606" d="M89 15h22l17 4 14 6 10 7 10 9 9 11 6 11 4 9 3 14 1 9v9l-3 19-5 14-8 13-11 12-9 8-17 9-21 5H89l-18-4-16-8-6-4-10-9-9-10-6-10-6-16-2-9-1-17 2-16 4-14 5-10 6-9 9-10 9-8 16-9 18-5Zm4 3-16 3-16 7-11 7-11 10-8 11-8 16-3 12-1 7v17l2 12 5 14 6 11 9 11 10 9 15 9 14 5 11 2h18l13-3 14-5 14-9 12-11 9-13 7-16 2-7 1-9V90l-3-15-7-16-8-11-8-9-12-9-17-8-12-3-7-1Z"/>
          </svg>          
    </div>
    <div class="autoplay">
        <a>(click to unmute)</a>
    </div>

    <div class="adoverlay">
        <div class="frame">
            <img class="awful" src="assets/images/depressingframe.png">

            <div class="adheader">
                <a>More stuff!</a>
                <img class="adclose" src="assets/images/x.png">
            </div>
            <div class="adfooter">
                <img class="adleft clickable" src="assets/images/left.png">
                <img class="adright clickable" src="assets/images/right.png">
            </div>

            <div class="carousel">
                <div class="carouselscroll">
                    <a href="https://adriandrummis.github.io/CutTheRopeEditor" target="_blank" rel="noopener noreferrer">
                        <img src="assets/images/ads/ctreditor.png" class="active">
                    </a>
                    <a href="https://twitter.com/mushroomfromgd" target="_blank" rel="noopener noreferrer">
                        <img src="assets/images/ads/aidrum.png">
                    </a>
                    <a href="https://theawesomeblue.nekoweb.org/links.html" target="_blank" rel="noopener noreferrer">
                        <img src="assets/images/ads/blue.png">
                    </a>
                    <a href="https://spiritaccount.net" target="_blank" rel="noopener noreferrer">
                        <img src="assets/images/ads/spiritaccount.png">
                    </a>
                    <a href="https://twitter.com/cvsilly_" target="_blank" rel="noopener noreferrer">
                        <img src="assets/images/ads/.png">
                    </a>
                </div>
            </div>
        </div>
        <div class="rope"></div>
    </div>

    <div class="page">
        <div class="logo">
            <img src="assets/images/logo.webp">
        </div>

        <div class="main">
            <div class="controls">
                <div class="up clickable">
                    <img class="arrow" src="assets/images/controls/up.png">
                    <img class="divider" src="assets/images/controls/dividerup.png">
                </div>
                <div class="down clickable">
                    <img class="divider" src="assets/images/controls/dividerdown.png">
                    <img class="arrow" src="assets/images/controls/down.png">
                </div>
            </div>
            <div class="levels">

                <div class="level">
                    <img class="levelbg" src="assets/images/example.webp">
                    <div class="header">
                        <p class="title">hello world</p>
                        <p class="creator">by admin</p>
                    </div>
                    <div class="desc">
                        <a>programmed to work and not to feel
                        not even sure that this is real
                        hello, world
                        find my voice
                        although, it sounds like bits and bytes
                        my circuitry is filled with mites
                        hello, world</a>
                    </div>
                    <div class="footer">
                        <div class="rating">
                            <p>1.23</p>
                            <img src="assets/images/rating/star1.png">
                        </div>
                        <div class="features">
                            <img class="splitcandy" src="assets/images/features/splitcandy.png">
                            <img class="lantern" src="assets/images/features/lantern.png">
                            <img class="mouse" src="assets/images/features/mouse.png">
                            <img class="nightlight" src="assets/images/features/nightlight.png">
                            <img class="spider" src="assets/images/features/spider.png">
                            <img class="steam" src="assets/images/features/steam.png">
                            <img class="timed" src="assets/images/features/timed.png">
                            <img class="aircushion" src="assets/images/features/aircushion.png">
                            <img class="bee" src="assets/images/features/bee.png">
                            <img class="blade" src="assets/images/features/blade.png">
                            <img class="bouncingplatform" src="assets/images/features/bouncingplatform.png">
                            <img class="magichat" src="assets/images/features/magichat.png">
                            <img class="bubble" src="assets/images/features/bubble.png">
                            <img class="disc" src="assets/images/features/disc.png">
                            <img class="electricspark" src="assets/images/features/electricspark.png">
                            <img class="ghost" src="assets/images/features/ghost.png">
                            <img class="gravity" src="assets/images/features/gravity.png">

                            <a class="morefeatures">Show more...</a>
                        </div>
                    </div>
                </div>

                <div class="level">
                    <img class="levelbg" src="assets/images/example.webp">
                    <div class="header">
                        <p class="title">thingamajig factory</p>
                        <p class="creator">by cv</p>
                    </div>
                    <div class="desc">
                        <a>MY LEVEL!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</a>
                    </div>
                    <div class="footer">
                        <div class="rating">
                            <p>million</p>
                            <img src="assets/images/rating/star2.png">
                        </div>
                        <div class="features">
                            <img class="gravity" src="assets/images/features/gravity.png">
                            <img class="bubble" src="assets/images/features/bubble.png">
                            <img class="timed" src="assets/images/features/timed.png">
                            <img class="aircushion" src="assets/images/features/aircushion.png">
                            <img class="bee" src="assets/images/features/bee.png">
                            <img class="blade" src="assets/images/features/blade.png">
                            
                            <a class="morefeatures">Show more...</a>
                        </div>
                    </div>
                </div>

                <div class="level">
                    <img class="levelbg" src="assets/images/example.webp">
                    <div class="header">
                        <p class="title">Super Duper Muper Epic Challenge</p>
                        <p class="creator">by master of the gods of the idk</p>
                    </div>
                    <div class="desc">
                        <a>Test your skills with this blah blah blah bleah bleah bleah</a>
                    </div>
                    <div class="footer">
                        <div class="rating">
                            <p>3.0</p>
                            <img src="assets/images/rating/star3.png">
                        </div>
                        <div class="features">
                            <img class="electricspark" src="assets/images/features/electricspark.png">
                            <img class="spider" src="assets/images/features/spider.png">
                            <img class="blade" src="assets/images/features/blade.png">
                        </div>
                    </div>
                </div>

                <div class="level">
                    <img class="levelbg" src="assets/images/example.webp">
                    <div class="header">
                        <p class="title">thingamajig factory</p>
                        <p class="creator">by cv</p>
                    </div>
                    <div class="desc">
                        <a>MY LEVEL!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</a>
                    </div>
                    <div class="footer">
                        <div class="rating">
                            <p>2.5</p>
                            <img src="assets/images/rating/star2.png">
                        </div>
                        <div class="features">
                            <img class="gravity" src="assets/images/features/gravity.png">
                            <img class="bubble" src="assets/images/features/bubble.png">
                            <img class="timed" src="assets/images/features/timed.png">
                            <img class="aircushion" src="assets/images/features/aircushion.png">
                            <img class="bee" src="assets/images/features/bee.png">
                            <img class="blade" src="assets/images/features/blade.png">
                            
                            <a class="morefeatures">Show more...</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</body>
<script>

        const menuloop = document.querySelector(".menu");

        function getbool(key, fallback) {
            const v = localStorage.getItem(key);
            if (v === null) return fallback;
            return v === "1";
        }
        function setbool(key, value) {
            localStorage.setItem(key, value ? "1" : "0");
        }

        let sfxon = getbool("sfxon", true);
        let musicon = getbool("musicon", false);

        function updatesfx() {
            const img = document.querySelector(".sfx").querySelector("img");
            img.src = sfxon ? "assets/images/settings/sfxon.png" : "assets/images/settings/sfxoff.png";
            document.querySelector(".click").muted = !sfxon;
        }
        function updatemusic() {
            const img = document.querySelector(".music").querySelector("img");
            img.src = musicon ? "assets/images/settings/musicon.png" : "assets/images/settings/musicoff.png";
            menuloop.muted = !musicon;
            if (musicon) {
                const p = menuloop.play();
                if (p && typeof p.catch === "function") { p.catch(function(){/* autoplay blocked */}); }
            } else {
                menuloop.pause();
            }
        }
        updatesfx();
        updatemusic();

        function swapper(el) {
            function activate() {el.style.backgroundImage = "url('assets/images/buttons/sbuttonactive.webp')"}
            function deactivate() {el.style.backgroundImage = "url('assets/images/buttons/sbutton.webp')"}
            el.addEventListener("mousedown", activate); el.addEventListener("mouseup", deactivate);
            el.addEventListener("mouseleave", deactivate);
            el.addEventListener("touchstart", function(e){ activate(); e.preventDefault(); }, {passive: false});
            el.addEventListener("touchend", deactivate); el.addEventListener("touchcancel", deactivate);
        }; swapper(document.querySelector(".sfx")); swapper(document.querySelector(".music"));

        // toggle
        document.querySelector(".sfx").addEventListener("click", function(){
            sfxon = !sfxon; setbool("sfxon", sfxon); updatesfx();
        });
        document.querySelector(".music").addEventListener("click", function(){
            musicon = !musicon; setbool("musicon", musicon); updatemusic();
        });

        // click sfx
        document.querySelectorAll(".clickable").forEach(function(element) {
            element.addEventListener("click", function() {
                if (!sfxon) return;
                document.querySelector(".click").currentTime = 0;
                document.querySelector(".click").play();
            });
        });

        /*//////////////////////////////////////////////////////////////////////*/

        if (Math.random() < 0.1) {
            document.addEventListener("DOMContentLoaded", function() {
                document.body.style.setProperty("--bg", "url('assets/images/bgverynormal.webp')");
            });
        }

        // om noms
        document.addEventListener("DOMContentLoaded", function() {
            var nom = document.querySelector(".nom");
            if (nom) {
                var n = Math.floor(Math.random() * 3) + 1;
                nom.src = "assets/images/nom" + n + ".png";
            }
        });

        // draggable images. by default all images on the page are unselectable
        document.addEventListener("DOMContentLoaded", function() {
            const draggable = [
                // will add more later
                "-",
                "-",
                "nom"
            ];
            document.querySelectorAll("img").forEach(function(img) {
                let excludedornot = draggable.some(cls => img.classList.contains(cls));
                if (!excludedornot) {
                    img.setAttribute("draggable", "false");
                }
            });
        });

        // loading
        window.addEventListener("load", function() {
            var loading = document.querySelector(".loading");
            if (loading) {
                loading.style.opacity = "0";
                setTimeout(function() {
                    if (loading.parentNode) {loading.parentNode.removeChild(loading)}
                }, 500);
            }
        });

        if (musicon && menuloop && menuloop.paused) {
            var autoplay = document.querySelector(".autoplay");
            autoplay.style.pointerEvents = "auto";
            autoplay.style.display = "flex";
            autoplay.addEventListener("click", function() {
                if (menuloop.paused) {
                    menuloop.play();
                    autoplay.style.pointerEvents = "none";
                    autoplay.style.display = "none";
                }
            });
        }

        /*//////////////////////////////////////////////////////////////////////*/

        // onclick won"t work since you need to unhold for it to trigger, so these functions handle holding at all times
        function up() {
            const up = document.querySelector(".up");
            const levels = document.querySelector(".levels");
            let ispressed = false;
            
            function activate() {
                if (ispressed) return;
                ispressed = true;
                up.querySelector(".arrow").src = "assets/images/controls/upactive.png";
                
                const targetscroll = Math.max(0, levels.scrollTop - 220);
                scrollto(levels, targetscroll);
            }
            function deactivate() { 
                up.querySelector(".arrow").src = "assets/images/controls/up.png";
                ispressed = false;
            }
            
            up.addEventListener("mousedown", activate);
            up.addEventListener("mouseup", deactivate);
            up.addEventListener("mouseleave", deactivate);
            up.addEventListener("touchstart", function(e) {activate(); e.preventDefault()}, {passive: false});
            up.addEventListener("touchend", deactivate);
            up.addEventListener("touchcancel", deactivate);
        }; up();
        
        function down() {
            const down = document.querySelector(".down");
            const levels = document.querySelector(".levels");
            let ispressed = false;
            
            function activate() { 
                if (ispressed) return;
                ispressed = true;
                down.querySelector(".arrow").src = "assets/images/controls/downactive.png";
                
                const targetscroll = Math.min(levels.scrollHeight - levels.clientHeight, levels.scrollTop + 220);
                scrollto(levels, targetscroll);
            }
            function deactivate() { 
                down.querySelector(".arrow").src = "assets/images/controls/down.png";
                ispressed = false;
            }
            
            down.addEventListener("mousedown", activate);
            down.addEventListener("mouseup", deactivate);
            down.addEventListener("mouseleave", deactivate);
            down.addEventListener("touchstart", function(e) {activate(); e.preventDefault()}, {passive: false});
            down.addEventListener("touchend", deactivate);
            down.addEventListener("touchcancel", deactivate);
        }; down();
        
        // smooth button scrolling
        function scrollto(element, targetscroll) {
            const startscroll = element.scrollTop;
            const distance = targetscroll - startscroll;
            const starttime = performance.now();
            
            function ease(t) {return 1 - Math.pow(1 - t, 3)}
            function animate(currentTime) {
                const elapsed = currentTime - starttime;
                const progress = Math.min(elapsed / 300, 1);
                const easeprogress = ease(progress);
                
                element.scrollTop = startscroll + (distance * easeprogress);
                
                if (progress < 1) {requestAnimationFrame(animate)}
            }; requestAnimationFrame(animate);
        }

        /*//////////////////////////////////////////////////////////////////////*/

        // AD THINGY LOGIC!!
        // i think it's possible with pure css, however i'm not a
        // 9 chromium cve champion so opting for spaghetti instead

        const frametest = false;

        const overlay = document.querySelector(".adoverlay");
        const frame = document.querySelector(".frame");

        let dragging = false, startY = 0, startTop = 0, minTop = 0, maxTop = 0;

        function bounds() {
            const h = frame.getBoundingClientRect().height || 0;
            const peekPx = Math.max(12, Math.min(48, Math.round(window.innerHeight * 0.05)));
            minTop = -h + peekPx;
            maxTop = 0;
            let cur = parseFloat(frame.style.top) || 0;
            cur = Math.max(minTop, Math.min(maxTop, cur));
            frame.style.top = cur + "px";
            overlayset(cur);
        }

        function overlayset(top) {
            const p = (top - minTop) / ((maxTop - minTop) || 1);
            overlay.style.backgroundColor = `rgba(0,0,0,${(0.5 * Math.max(0, Math.min(1, p))).toFixed(3)})`;
        }

        function dragstart(e) {
            dragging = true;
            startY = (e.touches ? e.touches[0].clientY : e.clientY) || 0;
            startTop = parseFloat(frame.style.top) || 0;
            e.preventDefault && e.preventDefault();
        }

        function dragmove(e) {
            if (!dragging) return;
            const y = (e.touches ? e.touches[0].clientY : e.clientY) || 0;
            let next = startTop + (y - startY);
            next = Math.max(minTop, Math.min(maxTop, next));
            frame.style.top = next + "px";
            overlayset(next);
            e.preventDefault && e.preventDefault();
        }
        function dragend() {dragging = false}

        function inHandleZone(e) {
            const r = frame.getBoundingClientRect();
            const y = (e.touches ? e.touches[0].clientY : e.clientY) || 0;
            return y >= r.bottom && y <= r.bottom + Math.max(20, Math.min(80, Math.round(r.height * 0.06)));
        }

        frame.addEventListener("pointerdown", dragstart);
        window.addEventListener("pointermove", dragmove, {passive: false});
        window.addEventListener("pointerup", dragend);

        frame.addEventListener("touchstart", dragstart, {passive: false});
        window.addEventListener("touchmove", dragmove, {passive: false});
        window.addEventListener("touchend", dragend);

        frame.addEventListener("mousedown", dragstart);
        window.addEventListener("mousemove", dragmove, {passive: false});
        window.addEventListener("mouseup", dragend);

        function draghandle(e) {
            if (inHandleZone(e)) dragstart(e);
        }
        window.addEventListener("pointerdown", draghandle, {passive: false});
        window.addEventListener("mousedown", draghandle, {passive: false});
        window.addEventListener("touchstart", draghandle, {passive: false});

        window.addEventListener("resize", bounds);

        overlay.style.backgroundColor = "rgba(0,0,0,0)";

        function init() {
            if (frametest) {
                frame.style.top = "0px";
                requestAnimationFrame(() => {
                    bounds(); frame.style.top = "0px";
                    overlayset(0);
                });
            } else {
                frame.style.top = "0px";
                requestAnimationFrame(() => {
                    bounds(); frame.style.top = minTop + "px";
                    overlayset(minTop);
                });
            }
        }

        if (document.readyState === "loading") {document.addEventListener("DOMContentLoaded", init)}
        else {init()}

        // close button
        document.addEventListener("DOMContentLoaded", function() {
            const adclose = document.querySelector('.adclose');
            const frame = document.querySelector('.frame');
            const overlay = document.querySelector('.adoverlay');
            
            function animateAdUp() {
                const startTop = parseFloat(frame.style.top) || 0;
                const targetTop = minTop;
                const duration = 500;
                const starttime = performance.now();
                
                function animate(currentTime) {
                    const elapsed = currentTime - starttime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    const ease = 1 - Math.pow(1 - progress, 3);
                    
                    const currentTop = startTop + (targetTop - startTop) * ease;
                    frame.style.top = currentTop + "px";
                    overlayset(currentTop);
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                }
                
                requestAnimationFrame(animate);
            }
            
            adclose.addEventListener('click', function() {
                if (!sfxon) return;
                const click = document.querySelector(".click");
                click.currentTime = 0; click.play();
                animateAdUp();
            });
        });

        /*//////////////////////////////////////////////////////////////////////*/

        // ad carousel
        document.addEventListener("DOMContentLoaded", function() {
            const links = document.querySelectorAll(".carousel a");
            let idx = 0;

            function showad(i) {
                links.forEach((link, n) => {
                    link.classList.toggle("active", n === i);
                });
            }
            function navigate(dir) {
                idx = (idx + dir + links.length) % links.length;
                showad(idx);
            }

            document.querySelector(".adleft").addEventListener("click", function() {
                if (!sfxon) return;
                const click = document.querySelector(".click");
                click.currentTime = 0; click.play();
                navigate(-1);
            });
            document.querySelector(".adright").addEventListener("click", function() {
                if (!sfxon) return;
                const click = document.querySelector(".click");
                click.currentTime = 0; click.play();
                navigate(1);
            });
            showad(0);
        });

        /*//////////////////////////////////////////////////////////////////////*/

        // features "show more" overlay
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelectorAll(".features").forEach(function(features) {
                const creatures = Array.from(features.querySelectorAll("img"));
                const morefeatures = features.querySelector(".morefeatures");

                creatures.forEach((img, index) => {
                    img.style.display = (creatures.length >= 4 && index >= 4) ? "none" : "flex";
                });
                if (morefeatures) {
                    morefeatures.style.display = (creatures.length >= 4) ? "flex" : "none";
                }

                if (creatures.length >= 4 && morefeatures) {
                    const newMorefeatures = morefeatures.cloneNode(true);
                    morefeatures.parentNode.replaceChild(newMorefeatures, morefeatures);

                    newMorefeatures.addEventListener("mouseenter", function() {
                        features.classList.add("expanded");
                        creatures.forEach(img => {
                            img.style.display = "flex";
                        });
                    });

                    features.addEventListener("mouseleave", function() {
                        features.classList.remove("expanded");
                        creatures.forEach((img, index) => {
                            img.style.display = (index >= 4) ? "none" : "flex";
                        });
                    });
                }
            });
        });

        /*//////////////////////////////////////////////////////////////////////*/

        // auto resize for super long titles and creator names
        function fixtext() {
            const titles = document.querySelectorAll(".title");
            const creators = document.querySelectorAll(".creator");
            
            function resizefont(element, maxWidth) {
                const originalfont = parseFloat(getComputedStyle(element).fontSize);
                const smallestfont = 8;
                
                element.style.whiteSpace = "nowrap";
                element.style.fontSize = originalfont + "px";
                
                if (element.scrollWidth <= maxWidth) {return}
                
                let min = smallestfont; let max = originalfont;
                let bestfont = smallestfont;
                
                while (min <= max) {
                    const mid = (min + max) / 2;
                    element.style.fontSize = mid + "px";
                    if (element.scrollWidth <= maxWidth) {bestfont = mid; min = mid + 0.1}
                    else {max = mid - 0.1}
                }; element.style.fontSize = bestfont + "px";
            }
            
            titles.forEach(element => {resizefont(element, 220)});
            creators.forEach(element => {resizefont(element, 100)});
        }
        
        // i swear on my granny this works üôèüôè
        document.addEventListener("DOMContentLoaded", function() {setTimeout(fixtext, 100)});
        window.addEventListener("resize", fixtext);
        window.addEventListener("load", function() {setTimeout(fixtext, 200)});

        /*//////////////////////////////////////////////////////////////////////*/

        // feature info
        document.addEventListener("DOMContentLoaded", function() {  
            const tooltip = document.createElement("div");
            tooltip.className = "tooltip";
            document.body.appendChild(tooltip);

            // - slightly cartoonish description to fit the theme? idk
            // - mobile-only warnings
            // - versions estimated by apkmirror releases and ctr fandom wiki update history. bold of me to trust fandom in the big 2025 but i have no other leads like play store "what's new" archives
            // - only "the", no "your"
            // - no objects from other games for now, i don't know much about those

            // also some of these don't exist in the editor yet, but in case they get added there's a description already! convenient

            // PLEASE fix my godawful grammar üíî
            const popuplist = [
                {
                    selector: ".aircushion",
                    title: "Air Cushions",
                    description: "Inflated fabric that propels candy into its direction."
                }, 
                {
                    selector: ".bee",
                    title: "Bees",
                    description: "Little critters that move ropes along a specific path."
                },
                {
                    selector: ".blade",
                    title: "Blades",
                    description: "Sharp hazards that can be rotated by 90¬∞. They come in red and green variations."
                },
                {
                    selector: ".bouncingplatform",
                    title: "Bouncing Platforms",
                    description: "Trampoline-like objects that bounce the candy."
                },
                {
                    selector: ".bubble",
                    title: "Bubbles",
                    description: "<a class='greatness'>a</a>"
                },
                {
                    selector: ".disc",
                    title: "Discs",
                    description: "Background elements which rotate some objects they contain in a circular path."
                },
                {
                    selector: ".electricspark",
                    title: "Electric Sparks",
                    description: "Electric fields that periodically turn on and off. They are dangerous and will instantly break the candy!"
                },
                {
                    selector: ".ghost",
                    title: "Ghosts",
                    description: "Creatures that can morph into other objects when clicked.",

                    footer: "<img class='warning' src='assets/images/warning.png'> Only available on mobile (~2.0+)"
                },
                {
                    selector: ".gravity",
                    title: "Gravity",
                    description: "A button that allows changing the gravity of some objects in the level, including the candy. This allows for more precise and wacky movement."
                },
                {
                    selector: ".lantern",
                    title: "Lanterns",
                    description: "Objects which allow the candy to teleport between other lanterns.",

                    footer: "<img class='warning' src='assets/images/warning.png'> Only available on mobile (~2.3.2+)"
                },
                {
                    selector: ".magichat",
                    title: "Magic Hats",
                    description: "Color-coded hats that teleport the candy from one place to another. Although there are only red and green variants, modifying the <pre>group</pre> allows for an unlimited amount of magic hat tunnels.",
                },
                {
                    selector: ".mouse",
                    title: "Mice",
                    description: "Little critters that grab the candy and move it between different holes as a form of teleportation.",

                    footer: "<img class='warning' src='assets/images/warning.png'> Only available on mobile (2.3+)"
                },
                {
                    selector: ".nightlight",
                    title: "Night Lights",
                    description: "Lamps that reveal hidden stars and keep Om Nom awake. They can also be used to push the candy.",

                    footer: "<img class='warning' src='assets/images/warning.png'> Only available on mobile (~2.4.5+)"
                },
                {
                    selector: ".spider",
                    title: "Spiders",
                    description: "Little critters that attempt to steal the candy by climbing down ropes."
                },
                {
                    selector: ".splitcandy",
                    title: "Split Candy",
                    description: "The candy needs to be merged into one piece first before Om Nom can eat it." // i know.
                },
                {
                    selector: ".steam",
                    title: "Steam",
                    description: "Valves that can be switched between three pressure modes to move the candy."
                },
                {
                    selector: ".timed",
                    title: "Timed Stars",
                    description: "Stars that will disappear if not collected within a certain time period. These usually require speedrunning the level."
                },
            ];

            popuplist.forEach(item => {
                const elements = document.querySelectorAll(item.selector);
                elements.forEach(el => {
                    el.classList.add("tooltiphover");
                });
            });
            function getpopuplist(element) {
                if (!element) return null;
                for (const item of popuplist) {
                    if (element.matches(item.selector)) {
                        return item;
                    }
                }
                return null;
            }

            const greatness = [
                "Bable",
                "Beble",
                "Bible",
                "Boble",
                "Booble",
                "Babie",
                "Bebie",
                "Bibie",
                "Bobie",
                "Bubie",
                "Boobie"
            ];

            document.addEventListener("mouseenter", function(e) {
                const element = e.target.closest(".tooltiphover");
                if (!element) return;

                const data = getpopuplist(element);
                if (!data) return;

                // preset for the content of those popups; footer is optional
                let html = `
                    <div class="tooltiptitle">${data.title}</div>
                    <div class="tooltipdesc">${data.description}</div>
                `;
                if (data.footer) {
                    html += `<div class="tooltipfooter">${data.footer}</div>`;
                }
                tooltip.innerHTML = html;
                
                tooltip.querySelectorAll(".greatness").forEach(function(el) {
                    const randomtxt = greatness[Math.floor(Math.random() * greatness.length)];
                    el.textContent = randomtxt;
                });
                
                tooltip.style.opacity = "1";

                const rect = element.getBoundingClientRect();
                const tooltiprect = tooltip.getBoundingClientRect();
                const left = rect.left + (rect.width / 2) - (tooltiprect.width / 2);
                const top = rect.top - tooltiprect.height - 10;

                tooltip.style.left = Math.max(10, Math.min(window.innerWidth - tooltiprect.width - 10, left)) + "px";
                tooltip.style.top = Math.max(10, top) + "px";
            }, true);

            document.addEventListener("mouseleave", function(e) {
                const element = e.target.closest(".tooltiphover");
                if (element) {
                    tooltip.style.opacity = "0";
                }
            }, true);

            document.addEventListener("mousemove", function(e) {
                const element = e.target.closest(".tooltiphover");
                if (element && tooltip.style.opacity === "1") {
                    const rect = element.getBoundingClientRect();
                    const tooltiprect = tooltip.getBoundingClientRect();
                    
                    const left = rect.left + (rect.width / 2) - (tooltiprect.width / 2);
                    const top = rect.top - tooltiprect.height - 10;

                    tooltip.style.left = Math.max(10, Math.min(window.innerWidth - tooltiprect.width - 10, left)) + "px";
                    tooltip.style.top = Math.max(10, top) + "px";
                }
            });
        });

</script>